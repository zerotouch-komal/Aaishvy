const LOCAL_STORAGE_WISHLIST_KEY="shopify-wishlist",LOCAL_STORAGE_DELIMITER=",",BUTTON_ACTIVE_CLASS="active",selectors={button:"[button-wishlist]",grid:"[grid-wishlist]",productCard:".inner-card-item"};document.addEventListener("DOMContentLoaded",()=>{initButtons(),initGrid()}),document.addEventListener("shopify-wishlist:updated",event=>{console.log("[Shopify Wishlist] Wishlist Updated",event.detail.wishlist),initGrid()});const fetchProductCardHTML=handle=>{const productTileTemplateUrl=`/products/${handle}?view=card`;return fetch(productTileTemplateUrl).then(res=>res.text()).then(res=>{const text=res,htmlDocument=new DOMParser().parseFromString(text,"text/html");return console.log("htmlDocument",htmlDocument.documentElement.querySelector),htmlDocument.documentElement.querySelector(selectors.productCard).outerHTML}).catch(err=>console.error(`[Shopify Wishlist] Failed to load content for handle: ${handle}`,err))},setupGrid=async grid=>{const wishlist=getWishlist();document.getElementById("wishnum").innerHTML=wishlist.length-0;const requests=wishlist.map(fetchProductCardHTML),wishlistProductCards=(await Promise.all(requests)).join("");grid.innerHTML=wishlistProductCards,initButtons();const event=new CustomEvent("shopify-wishlist:init-product-grid",{detail:{wishlist}});document.dispatchEvent(event)},setupButtons=buttons=>{buttons.forEach(button=>{const productHandle=button.dataset.productHandle||!1;if(!productHandle)return console.error("[Shopify Wishlist] Missing `data-product-handle` attribute. Failed to update the wishlist.");wishlistContains(productHandle)&&button.classList.add(BUTTON_ACTIVE_CLASS),button.addEventListener("click",()=>{updateWishlist(productHandle),button.classList.toggle(BUTTON_ACTIVE_CLASS)})})},initGrid=()=>{const grid=document.querySelector(selectors.grid)||!1;grid&&setupGrid(grid)},initButtons=()=>{const buttons=document.querySelectorAll(selectors.button)||[];if(buttons.length)setupButtons(buttons);else return;const event=new CustomEvent("shopify-wishlist:init-buttons",{detail:{wishlist:getWishlist()}});document.dispatchEvent(event)},getWishlist=()=>{const wishlist=localStorage.getItem(LOCAL_STORAGE_WISHLIST_KEY)||!1;return wishlist?wishlist.split(LOCAL_STORAGE_DELIMITER):[]},setWishlist=array=>{const wishlist=array.join(LOCAL_STORAGE_DELIMITER);document.getElementById("wishnum").innerHTML=array.length-0,array.length?localStorage.setItem(LOCAL_STORAGE_WISHLIST_KEY,wishlist):localStorage.removeItem(LOCAL_STORAGE_WISHLIST_KEY);const event=new CustomEvent("shopify-wishlist:updated",{detail:{wishlist:array}});return document.dispatchEvent(event),wishlist},updateWishlist=handle=>{const wishlist=getWishlist(),indexInWishlist=wishlist.indexOf(handle);return indexInWishlist===-1?wishlist.push(handle):wishlist.splice(indexInWishlist,1),setWishlist(wishlist)},wishlistContains=handle=>{const wishlist=getWishlist();return document.getElementById("wishnum").innerHTML=wishlist.length-0,wishlist.includes(handle)},resetWishlist=()=>setWishlist([]);function initWishlist(){$(".add-to-wishlist").click(function(e){e.preventDefault();var form=$(this).parent(),productItem=$(this).parents(".product-container");console.log(productItem),$.ajax({type:"POST",url:"/contact",data:form.serialize(),beforeSend:function(){form.html('<div class="loader"><svg xml:space="preserve" style="enable-background:new 0 0 50 50;" viewBox="0 0 24 30" height="20px" width="21px" y="0px" x="0px" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" id="Layer_1" version="1.1"><rect opacity="0.2" fill="#333" height="8" width="3" y="10" x="0"><animate repeatCount="indefinite" dur="0.6s" begin="0s" values="0.2; 1; .2" attributeType="XML" attributeName="opacity"/><animate repeatCount="indefinite" dur="0.6s" begin="0s" values="10; 20; 10" attributeType="XML" attributeName="height"/><animate repeatCount="indefinite" dur="0.6s" begin="0s" values="10; 5; 10" attributeType="XML" attributeName="y"/></rect><rect opacity="0.2" fill="#333" height="8" width="3" y="10" x="8"> <animate repeatCount="indefinite" dur="0.6s" begin="0.15s" values="0.2; 1; .2" attributeType="XML" attributeName="opacity"/><animate repeatCount="indefinite" dur="0.6s" begin="0.15s" values="10; 20; 10" attributeType="XML" attributeName="height"/><animate repeatCount="indefinite" dur="0.6s" begin="0.15s" values="10; 5; 10" attributeType="XML" attributeName="y"/></rect><rect opacity="0.2" fill="#333" height="8" width="3" y="10" x="16"><animate repeatCount="indefinite" dur="0.6s" begin="0.3s" values="0.2; 1; .2" attributeType="XML" attributeName="opacity"/><animate repeatCount="indefinite" dur="0.6s" begin="0.3s" values="10; 20; 10" attributeType="XML" attributeName="height"/><animate repeatCount="indefinite" dur="0.6s" begin="0.3s" values="10; 5; 10" attributeType="XML" attributeName="y"/></rect></svg></div>')},success:function(data){form.html('<a class="btn wishlist btn-default added" href="/pages/wish-list" title="Go to wishlist" style="border: 1px solid #dadada !important; border-radius: 50%;"><i class="fa fa-check"></i></a>');var title=$(productItem).find(".product-name").html(),image=$(productItem).find(".product-featured-image").attr("src");$(".product-popup").removeClass("cart-popup").addClass("wishlist-popup"),$(".product-popup .overlay").removeClass("no-background"),$(".product-popup").find(".product-name").html(title),$(".product-popup").find(".product-image img").attr("src",image),showPopup(".product-popup")},error:function(xhr,text){form.html('<a class="btn btn-default wishlist added" href="/pages/wish-list" title="Go to wishlist" style="border: 1px solid #dadada !important; border-radius: 50%;"><i class="fa fa-check"></i></a>'),$(".error-message").text($.parseJSON(xhr.responseText).description),showPopup(".error-popup")}})})}
//# sourceMappingURL=/cdn/shop/t/22/assets/wishlist.js.map?v=174366809785366429541703159806
